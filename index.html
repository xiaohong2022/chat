<title>小宏の聊天室</title>
<div id="app"></div>
<div><input placeholder="说点什么..."></div>
<script>var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,f){b.raw=f;return b};
!function(){function b(a){var c=document.createElement("div");c.innerText=a;document.querySelector("#app").appendChild(c)}function f(){document.querySelector("input").addEventListener("keypress",function(a){13===a.keyCode&&(d.send('42["broadcast",'+JSON.stringify({data:this.value,room_id:37653,username:e})+"]"),this.value="")});window.addEventListener("beforeunload",function(){d.send('42["leave",'+JSON.stringify({room_name:"XH_zu8s1tQ0g1",username:e,room_id:37653,work_id:"179218045"})+"]")})}var e=
prompt("\u8f93\u5165\u6635\u79f0\uff0c\u4ee5\u52a0\u5165\u670d\u52a1\u5668");e||location.reload();var d=new WebSocket("wss://socket-cr.codemao.cn:9090/coconut/?x-coconut-authorization=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ3b3JrX2lkIjoiMTc5MjE4MDQ1IiwidXNlcl9pZCI6IjkyMzIxNTEifQ.PEJx3asH_HECfXzs0VmjNUGif2tDSKbBvznCP_iGHmc&X-CodeMao-Mobile-Requested=%7B%22group_id%22%3A%22b494b662-67e9-4b54-a86b-82ac09ef9284%22%2C%22platform%22%3A%22web%22%2C%22origin%22%3A%22coconut%22%7D&EIO=3&transport=websocket");
d.onclose=function(){console.log("\u670d\u52a1\u5668\u4e2d\u65ad\uff01");alert("\u670d\u52a1\u5668\u4e2d\u65ad\uff01\u6b63\u5728\u91cd\u65b0\u52a0\u8f7d\uff01");location.reload()};setInterval(function(){d.send("2")},5E4);d.onmessage=function(a){a=a.data;if(a.startsWith("0"))console.log(JSON.parse(a.slice(1))),d.send('42["join",'+JSON.stringify({room_name:"XH_zu8s1tQ0g1",username:e,room_id:37653,work_id:"179218045"})+"]"),f();else if(!1===isNaN(Number(a)))"3"===a?console.log("\u670d\u52a1\u5668ping\u6210\u529f"):
"1"===a&&console.log("\u670d\u52a1\u5668\u5373\u5c06\u4e2d\u65ad");else if(a.startsWith("42")){a=JSON.parse(a.slice(2));console.log(a);var c=a[1];switch(a[0]){case "join":b("\u7cfb\u7edf\uff1a"+c.username+"\u8fdb\u5165\u4e86\u804a\u5929\u5ba4");break;case "leave":b("\u7cfb\u7edf\uff1a"+c.username+"\u79bb\u5f00\u4e86\u804a\u5929\u5ba4");break;case "broadcast":b(c.username+"\uff1a"+c.data)}}}}();
</script>
